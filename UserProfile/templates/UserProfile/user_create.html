<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create User</title>
</head>
<body>
    <h1>Create User Account</h1>

    <!-- Display success or error messages -->
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li class="{{ message.tags }}">{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}  <!-- Dynamically render all form fields -->
        <button type="submit" id="create-user-button" disabled>Create User</button>
    </form>

    <p>
        Already have an account? 
        <a href="{% url 'user_login' %}">Log in here</a>.
    </p>

    <!-- Back Button -->
    <button onclick="window.history.back()">Back</button>

    <script>
        // Enable the "Create User" button only if both checkboxes are checked
        const consentCheckbox = document.getElementById('id_expression_of_consent');
        const declarationCheckbox = document.getElementById('id_declaration_undertaking');
        const createUserButton = document.getElementById('create-user-button');

        function toggleCreateButton() {
            createUserButton.disabled = !(consentCheckbox.checked && declarationCheckbox.checked);
        }

        consentCheckbox.addEventListener('change', toggleCreateButton);
        declarationCheckbox.addEventListener('change', toggleCreateButton);
    </script>
</body>
</html>
